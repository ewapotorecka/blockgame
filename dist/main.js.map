{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/customblock.ts","webpack:///./src/emitter.ts","webpack:///./src/game.ts","webpack:///./src/index.ts","webpack:///./src/keyboardcontroller.ts","webpack:///./src/levels.ts","webpack:///./src/menu.ts","webpack:///./src/rectangleblock.ts","webpack:///./src/renderer.ts","webpack:///./src/scene.ts"],"names":[],"mappings":"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EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE;oBACxH,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE;oBACpG,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE;oBACxH,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,EAAE,EAAE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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","import { Position, Block } from './common';\n\nexport class CustomBlock implements Block {\n    private positions: Position[];\n\n    constructor( positions: Position[] ) {\n        this.positions = positions;\n    }\n\n    get partialPositions() {\n        return this.positions;\n    }\n\n    draw( ctx: CanvasRenderingContext2D, color: string, tileSize: number ) {\n        for ( const position of this.positions ) {\n            ctx.fillStyle = color;\n            ctx.fillRect( position.x * tileSize, position.y * tileSize, tileSize, tileSize );\n        }\n    }\n\n    move( moveVector: Position ) {\n        for ( const position of this.positions ) {\n            position.x += moveVector.x;\n            position.y += moveVector.y;\n        }\n    }\n}\n","export class Emitter<T = void> {\n    private functions: Callback<T>[] = [];\n\n    subscribe( fn: Callback<T> ) {\n        this.functions.push( fn );\n    }\n\n    emit( arg: T ) {\n        for ( const fn of this.functions ) {\n            fn( arg );\n        }\n    }\n}\n\ntype Callback<T> = ( arg: T ) => void;\n","\nimport { Scene } from './scene';\nimport { levels } from './levels';\nimport { Renderer } from './renderer';\nimport { Emitter } from './emitter';\nimport { Level } from './common';\nimport { KeyboardController } from './keyboardcontroller';\n\nexport const enum levelStates {\n\tUNDONE = 0,\n\tDONE = 1,\n\tSKIPPED = 2\n}\n\nexport class Game {\n\tpublic levelChangeEmitter = new Emitter();\n\tpublic endGameEmitter = new Emitter();\n\tpublic levelNum: number;\n\tprivate scene: Scene;\n\tprivate renderer: Renderer;\n\tprivate keyboardController: KeyboardController;\n\n\tconstructor(\n\t\tcanvas: HTMLCanvasElement,\n\t\tpublic levels: Level[],\n\t\tpublic levelsInfo = levels.map( () => levelStates.UNDONE )\n\t) {\n\t\tthis.levelNum = -1;\n\t\tthis.scene = new Scene();\n\t\tthis.keyboardController = new KeyboardController();\n\t\tconst ctx = canvas.getContext( '2d' );\n\n\t\tif ( !ctx ) {\n\t\t\tthrow new Error( 'Canvas is not supported' );\n\t\t}\n\n\t\tthis.renderer = new Renderer( ctx, this.scene );\n\t}\n\n\tstart() {\n\t\tthis.keyboardController.moveEmitter.subscribe( moveVector => {\n\t\t\tthis.scene.movePlayer( moveVector );\n\t\t\tthis.renderer.animate();\n\t\t} );\n\n\t\tthis.scene.levelChangeEmitter.subscribe( () => {\n\t\t\tthis.levelsInfo[ this.levelNum ] = levelStates.DONE;\n\t\t\tthis.loadNextLevel();\n\t\t} );\n\n\t\twindow.addEventListener( 'resize', () => {\n\t\t\tthis.renderer.resizeBoard();\n\t\t\tthis.renderer.renderBoard();\n\t\t} );\n\n\t\tthis.loadNextLevel();\n\t}\n\n\tpublic loadNextLevel() {\n\t\tlet nextLevelIndex = this.levelNum + 1;\n\n\t\tif ( nextLevelIndex >= this.levels.length ) {\n\t\t\tif ( this.levelsInfo.every( state => state == levelStates.DONE ) ) {\n\t\t\t\tthis.endGameEmitter.emit();\n\t\t\t}\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.levelsInfo[ nextLevelIndex ] == levelStates.DONE ) {\n\t\t\tnextLevelIndex = this.levelsInfo.findIndex( state => state == levelStates.UNDONE || state == levelStates.SKIPPED );\n\t\t}\n\n\t\tthis.loadLevel( nextLevelIndex );\n\t}\n\n\tpublic loadLevel( id: number ) {\n\t\tthis.levelNum = id;\n\t\tconst level = levels[ this.levelNum ];\n\t\tthis.scene.setLevelData( level );\n\t\tthis.renderer.resizeBoard();\n\t\tthis.renderer.renderBoard();\n\t\tthis.levelChangeEmitter.emit();\n\t}\n\n\tpublic skipCurrentLevel() {\n\t\tthis.levelsInfo[ this.levelNum ] = levelStates.SKIPPED;\n\t\tthis.loadNextLevel();\n\t}\n\n\tpublic resetGame() {\n\t\tthis.levelsInfo = levels.map( () => levelStates.UNDONE );\n\t\tthis.levelNum = 0;\n\t\tthis.loadLevel( this.levelNum );\n\n\n\t}\n\n\tpublic canLevelBeLoaded( index: number ) {\n\t\tif ( index === 0 && this.levelsInfo[ index ] == levelStates.UNDONE ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( this.levelsInfo[ index ] == levelStates.SKIPPED ) {\n\t\t\treturn true;\n\t\t}\n\n\t\tif ( this.levelsInfo[ index ] == levelStates.DONE ) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (\n\t\t\tthis.levelsInfo[ index - 1 ] == levelStates.DONE ||\n\t\t\tthis.levelsInfo[ index - 1 ] == levelStates.SKIPPED\n\t\t) {\n\t\t\treturn true;\n\t\t}\n\n\t\treturn false;\n\t}\n}\n\n","import { Game } from './game';\nimport { Menu } from './menu';\nimport { levels } from './levels';\n\nlet progress;\n\nif ( localStorage.getItem( 'levelInfo' ) ) {\n\tprogress = JSON.parse( localStorage.getItem( 'levelInfo' )! );\n}\n\nconst game = new Game( document.getElementById( 'blocksBoard' ) as HTMLCanvasElement, levels, progress );\nconst menu = new Menu( game );\ngame.start();\ngame.levelChangeEmitter.subscribe( () => {\n\tlocalStorage.setItem( 'levelInfo', JSON.stringify( game.levelsInfo ) );\n})\n\ngame.endGameEmitter.subscribe( () => {\n\tconst endScreen: HTMLElement = document.getElementById( 'end-screen' )!;\n\tconst restartButton: HTMLElement = document.getElementById( 'restart-game' )!;\n\n\tendScreen.style.visibility = 'visible';\n\trestartButton.addEventListener( 'click', () => {\n\t\tgame.resetGame();\n\t\tendScreen.style.visibility= 'hidden';\n\t} );\n\n});\n\n(window as any).game = game;","import { Emitter } from \"./emitter\";\nimport { Position } from \"./common\";\n\nconst timeInterval = 100;\n\nexport class KeyboardController {\n\tpublic moveEmitter = new Emitter<Position>();\n\tprivate pressedKeys: string[] = [];\n\tprivate isIntervalRunning = false;\n\tprivate intervalId?: number;\n\tprivate movementKeys: readonly string[] = [ 'ArrowUp', 'ArrowDown', 'ArrowLeft', 'ArrowRight' ];\n\n\tconstructor() {\n\t\tthis.handleKeyboard();\n\t}\n\n\tprivate handleKeyboard() {\n\t\tdocument.addEventListener( 'keydown', event => {\n\t\t\tif ( !this.movementKeys.includes( event.key ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tif ( this.pressedKeys.includes( event.key ) ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.pressedKeys.push( event.key );\n\n\t\t\tif ( this.isIntervalRunning ) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis.emitLastMovementKey();\n\n\t\t\tthis.intervalId = setInterval( () => {\n\t\t\t\tthis.emitLastMovementKey();\n\t\t\t}, timeInterval );\n\n\t\t\tthis.isIntervalRunning = true;\n\t\t} );\n\n\t\tdocument.addEventListener( 'keyup', event => {\n\t\t\tthis.pressedKeys = this.pressedKeys.filter( key => key != event.key );\n\n\t\t\tif ( this.pressedKeys.length == 0 ) {\n\t\t\t\tclearInterval( this.intervalId );\n\t\t\t\tthis.isIntervalRunning = false;\n\t\t\t}\n\t\t})\n\t}\n\n\tprivate emitLastMovementKey() {\n\t\tconst lastPressedKey = this.pressedKeys[ this.pressedKeys.length - 1 ];\n\n\t\tif ( lastPressedKey === 'ArrowUp' ) {\n\t\t\tthis.moveEmitter.emit( { x: 0, y: -1 } );\n\t\t} else if ( lastPressedKey === 'ArrowDown' ) {\n\t\t\tthis.moveEmitter.emit( { x: 0, y: 1 } );\n\t\t} else if ( lastPressedKey === 'ArrowLeft' ) {\n\t\t\tthis.moveEmitter.emit( { x: -1, y: 0 } );\n\t\t} else if ( lastPressedKey === 'ArrowRight' ) {\n\t\t\tthis.moveEmitter.emit( { x: 1, y: 0 } );\n\t\t}\n\t}\n}","import { Level } from './common';\n\nexport const levels: Level[] = [\n\t{\n\t\tboard: {\n\t\t\theight: 15,\n\t\t\twidth: 15\n\t\t},\n\t\texit: { x: 14, y: 14 },\n\t\tplayerPosition: { x: 8, y: 8 },\n\t\tblocks: [\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 7, y: 7 }, { x: 8, y: 7 }, { x: 9, y: 7 }, { x: 7, y: 9 }, { x: 8, y: 9 }, { x: 9, y: 9 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 9, y: 8 }, { x: 10, y: 8 }, { x: 10, y: 7 }, { x: 10, y: 6 }, { x: 9, y: 6 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 7, y: 8 }, { x: 6, y: 8 }, { x: 6, y: 9 }, { x: 6, y: 10 }, { x: 7, y: 10 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 4, y: 5 }, { x: 5, y: 5 }, { x: 6, y: 5 }, { x: 7, y: 5 }, { x: 8, y: 5 }, { x: 9, y: 5 }, { x: 10, y: 5 },\n\t\t\t\t{ x: 6, y: 11 }, { x: 7, y: 11 }, { x: 8, y: 11 }, { x: 9, y: 11 }, { x: 10, y: 11 }, { x: 11, y: 11 }, { x: 12, y: 11 },\n\t\t\t\t{ x: 12, y: 6 }, { x: 12, y: 7 }, { x: 12, y: 8 }, { x: 12, y: 9 }, { x: 12, y: 10 }, { x: 4, y: 11 }, { x: 5, y: 11 },\n\t\t\t\t{ x: 4, y: 6 }, { x: 4, y: 7 }, { x: 4, y: 8 }, { x: 4, y: 9 }, { x: 4, y: 10 }, { x: 12, y: 5 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 3, y: 4 }, { x: 4, y: 4 }, { x: 5, y: 4 }, { x: 6, y: 4 }, { x: 7, y: 4 }, { x: 8, y: 4 }, { x: 9, y: 4 },\n\t\t\t\t{ x: 10, y: 4 }, { x: 11, y: 4 }, { x: 12, y: 4 }, { x: 13, y: 4 }, { x: 14, y: 4 }, { x: 14, y: 5 },\n\t\t\t\t{ x: 14, y: 6 }, { x: 14, y: 7 }, { x: 14, y: 8 }, { x: 14, y: 9 }, { x: 14, y: 10 }, { x: 14, y: 11 }, { x: 14, y: 12 },\n\t\t\t\t{ x: 14, y: 13 }, { x: 13, y: 13 }, { x: 12, y: 13 }, { x: 11, y: 13 }, { x: 10, y: 13 }, { x: 9, y: 13 }, { x: 8, y: 13 },\n\t\t\t\t{ x: 7, y: 13 }, { x: 6, y: 13 }, { x: 5, y: 13 }, { x: 4, y: 13 }, { x: 3, y: 13 }, { x: 3, y: 11 }, { x: 3, y: 10 },\n\t\t\t\t{ x: 3, y: 9 }, { x: 3, y: 8 }, { x: 3, y: 7 }, { x: 3, y: 6 }, { x: 3, y: 5 }, { x: 3, y: 4 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 2, y: 14 }, { x: 2, y: 13 }, { x: 2, y: 1 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 0, y: 0 }, { x: 1, y: 0 }, { x: 2, y: 0 }, { x: 2, y: 2 }, { x: 3, y: 2 }, { x: 4, y: 2 } ]\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tboard: {\n\t\t\theight: 20,\n\t\t\twidth: 5\n\t\t},\n\t\texit: { x: 0, y: 0 },\n\t\tplayerPosition: { x: 4, y: 19 },\n\t\tblocks: [\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 1, y: 18 },\n\t\t\t\twidth: 4,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 1, y: 17 }, { x: 2, y: 17 }, { x: 2, y: 14 }, { x: 3, y: 14 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 0, y: 16 }, { x: 2, y: 16 }, { x: 3, y: 16 },\n\t\t\t\t{ x: 0, y: 13 }, { x: 1, y: 13 }, { x: 2, y: 13 }, { x: 4, y: 13 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 0, y: 11 },\n\t\t\t\twidth: 4,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 2, y: 10 }, { x: 3, y: 10 }, { x: 1, y: 12 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 1, y: 9 }, { x: 2, y: 9 }, { x: 4, y: 9 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 0, y: 7 }, { x: 2, y: 7 }, { x: 3, y: 7 },\n\t\t\t\t{ x: 0, y: 5 }, { x: 1, y: 5 }, { x: 2, y: 5 }, { x: 4, y: 5 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 1, y: 8 }, { x: 3, y: 6 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 1, y: 3 },\n\t\t\t\twidth: 4,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 0, y: 1 },\n\t\t\t\twidth: 4,\n\t\t\t\theight: 1\n\t\t\t}\n\n\t\t]\n\t},\n\t{\n\t\tboard: {\n\t\t\theight: 8,\n\t\t\twidth: 9\n\t\t},\n\t\texit: { x: 0, y: 0 },\n\t\tplayerPosition: { x: 8, y: 7 },\n\t\tblocks: [\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 2, y: 1 },\n\t\t\t\twidth: 6,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 2, y: 3 },\n\t\t\t\twidth: 6,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 2, y: 5 },\n\t\t\t\twidth: 6,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 2, y: 0 }, { x: 2, y: 2 }, { x: 2, y: 4 }, { x: 2, y: 6 }, ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 1, y: 7 },\n\t\t\t\twidth: 5,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 0, y: 2 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 4, y: 0 } ]\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tboard: {\n\t\t\theight: 9,\n\t\t\twidth: 9\n\t\t},\n\t\texit: { x: 4, y: 4 },\n\t\tplayerPosition: { x: 6, y: 6 },\n\t\tblocks: [\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 3, y: 3 }, { x: 3, y: 5 }, { x: 5, y: 5 }, { x: 5, y: 3 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 2, y: 3 },\n\t\t\t\twidth: 1,\n\t\t\t\theight: 3\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 3, y: 2 },\n\t\t\t\twidth: 3,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 6, y: 3 },\n\t\t\t\twidth: 1,\n\t\t\t\theight: 3\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 3, y: 6 },\n\t\t\t\twidth: 3,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 7, y: 7 }, { x: 3, y: 4 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 1, y: 1 }, { x: 4, y: 3 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 1, y: 7 }, { x: 5, y: 4 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 7, y: 1 }, { x: 4, y: 5 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 4, y: 0 },\n\t\t\t\twidth: 1,\n\t\t\t\theight: 2\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 4, y: 7 },\n\t\t\t\twidth: 1,\n\t\t\t\theight: 2\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 0, y: 4 },\n\t\t\t\twidth: 2,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 7, y: 4 },\n\t\t\t\twidth: 2,\n\t\t\t\theight: 1\n\t\t\t}\n\t\t]\n\t},\n\t{\n\t\tboard: {\n\t\t\theight: 8,\n\t\t\twidth: 9\n\t\t},\n\t\texit: { x: 0, y: 0 },\n\t\tplayerPosition: { x: 8, y: 7 },\n\t\tblocks: [\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 2, y: 1 },\n\t\t\t\twidth: 6,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 2, y: 3 },\n\t\t\t\twidth: 6,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 2, y: 5 },\n\t\t\t\twidth: 6,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 2, y: 0 }, { x: 2, y: 2 }, { x: 2, y: 4 }, { x: 2, y: 6 }, ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'rectangle',\n\t\t\t\tposition: { x: 1, y: 7 },\n\t\t\t\twidth: 5,\n\t\t\t\theight: 1\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 0, y: 2 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 4, y: 0 } ]\n\t\t\t},\n\t\t\t{\n\t\t\t\ttype: 'custom',\n\t\t\t\tpoints: [ { x: 1, y: 1 }, { x: 6, y: 6 } ]\n\t\t\t}\n\t\t]\n\t}\n];\n","import { levelStates, Game } from './game';\n\nexport class Menu {\n    constructor( game: Game ) {\n        const skipLevelButton = document.getElementById( 'skip-level' )!;\n        const resetButton = document.getElementById( 'reset' )!;\n\t\tconst levelList = document.getElementById( 'level-list' )!;\n\t\t\n        skipLevelButton.addEventListener( 'click', () => {\n\t\t\tlet skippedLevels = 1;\n\t\t\tfor ( const level of game.levelsInfo ) {\n\t\t\t\tif ( level == levelStates.SKIPPED ) {\n\t\t\t\t\tskippedLevels++\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif ( skippedLevels > 2 ) {\n\t\t\t\twindow.alert( 'You can skip up to 2 levels.' );\n\t\t\t\treturn;\n\t\t\t}\n            game.skipCurrentLevel();\n        } );\n        resetButton.addEventListener( 'click', () => game.loadLevel( game.levelNum ) );\n\n        for ( let i = 0; i < game.levels.length; i++ ) {\n            const button = document.createElement( 'BUTTON' );\n            levelList.appendChild( button );\n            button.innerText = 'Level ' + ( i + 1 ).toString();\n            button.addEventListener( 'click', () => {\n\t\t\t\tif ( game.canLevelBeLoaded( i ) ) {\n\t\t\t\t\tgame.loadLevel( i );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tgame.levelChangeEmitter.subscribe( () => {\n        \tsetButtonColors( game, levelList );\n\t\t} );\n    }\n}\n\nfunction setButtonColors( game: Game, levelList: HTMLElement ) {\n\tgame.levelsInfo.forEach( ( state, index ) => {\n\t\tconst button = levelList.children[ index ] as HTMLElement;\n\t\tbutton.className = '';\n\n\t\tswitch( state ) {\n\t\t\tcase levelStates.DONE:\n\t\t\t\tbutton.classList.add( 'done' );\n\t\t\t\tbreak;\n\t\t\tcase levelStates.SKIPPED:\n\t\t\t\tbutton.classList.add( 'skipped' );\n\t\t\t\tbreak;\n\t\t\tcase levelStates.UNDONE:\n\t\t\t\tbutton.classList.add( 'undone' );\n\t\t\t\tbreak;\n\t\t}\n\t\tif ( game.levelNum == index ) {\n\t\t\tbutton.classList.add( 'active' );\n\t\t}\n\n\t\tif ( !game.canLevelBeLoaded( index ) ) {\n\t\t\tbutton.style.cursor = 'auto';\n\t\t} else {\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t}\n\t} );\n}","import { Position, Block } from './common';\n\nexport class RectangleBlock implements Block {\n    private position: Position;\n    private width: number;\n    private height: number;\n\n    constructor( position: Position, width: number, height: number ) {\n        this.position = position;\n        this.width = width;\n        this.height = height;\n    }\n\n    get partialPositions() {\n        const blockPartialPositions = [];\n\n        for ( let i = 0; i < this.height; i++ ) {\n            for ( let j = 0; j < this.width; j++ ) {\n                blockPartialPositions.push( {\n                    x: this.position.x + j,\n                    y: this.position.y + i\n                } );\n            }\n        }\n\n        return blockPartialPositions;\n    }\n\n    draw( ctx: CanvasRenderingContext2D, color: string, tileSize: number ) {\n        ctx.fillStyle = color;\n        ctx.fillRect( this.position.x * tileSize, this.position.y * tileSize, this.width * tileSize, this.height * tileSize );\n    }\n\n    move( moveVector: Position ) {\n        this.position.x += moveVector.x;\n        this.position.y += moveVector.y;\n    }\n}\n\n","import { Scene } from './scene';\n\nexport class Renderer {\n    private _ctx: CanvasRenderingContext2D;\n    private _scene: Scene;\n\tprivate _tileSize!: number;\n\tprivate animationFrame = 5;\n\n    constructor( ctx: CanvasRenderingContext2D, scene: Scene ) {\n        this._ctx = ctx;\n        this._scene = scene;\n\t}\n\t\n\tanimate() {\n\t\tfor ( let i = 0; i < 5; i++ ) {\n\t\t\tsetTimeout( () => {\n\t\t\t\tthis.animationFrame = i + 1;\n\t\t\t\tthis.renderBoard();\n\t\t\t}, i * 20 );\n\t\t}\n\t}\n\n    renderBoard() {\n        this._clearCanvas();\n        this._drawBoard();\n        this._drawBlocks();\n        this._drawPlayer();\n        this._drawExit();\n    }\n\n    resizeBoard() {\n        if ( window.innerHeight / this._scene.board.height < ( window.innerWidth - 400 ) / this._scene.board.width ) {\n            this._tileSize = window.innerHeight / this._scene.board.height;\n        } else {\n            this._tileSize = ( window.innerWidth - 400 ) / this._scene.board.width;\n        }\n\n        this._ctx.canvas.height = this._scene.board.height * this._tileSize;\n        this._ctx.canvas.width = this._scene.board.width * this._tileSize;\n\t}\n\n    _clearCanvas() {\n        this._ctx.clearRect( 0, 0, this._ctx.canvas.width, this._ctx.canvas.height );\n    }\n\n    _drawBoard() {\n        const board = this._scene.board;\n\n        this._ctx.strokeRect(\n            0, 0, board.width * this._tileSize, board.height * this._tileSize\n        );\n    }\n\n    _drawBlocks() {\n        const colorAdd = 255 / this._scene.blocks.length;\n        let colorNum = 0;\n        for ( const block of this._scene.blocks ) {\n\t\t\tconst color = `rgb( ${ colorNum }, ${ colorNum }, ${ colorNum } )`;\n\t\t\t\n\t\t\tif( block == this._scene.moveInfo.block ) {\n\t\t\t\tthis._ctx.save();\n\n\t\t\t\tthis._ctx.translate(\n\t\t\t\t\tthis._tileSize * -( 5 - this.animationFrame ) / 5 * this._scene.moveInfo.moveVector.x, \n\t\t\t\t\tthis._tileSize * -( 5 - this.animationFrame ) / 5 * this._scene.moveInfo.moveVector.y\n\t\t\t\t\t);\n\t\t\t\tblock.draw( this._ctx, color, this._tileSize );\n\n\t\t\t\tthis._ctx.restore();\n\t\t\t} else {\n\t\t\t\tblock.draw( this._ctx, color, this._tileSize );\n\t\t\t}\n\n            colorNum = colorNum + colorAdd;\n        }\n    }\n\n    _drawPlayer() {\n        const player = {\n\t\t\tx: this._scene.playerPosition.x - ( 5 - this.animationFrame ) / 5 * this._scene.moveInfo.moveVector.x,\n\t\t\ty: this._scene.playerPosition.y - ( 5 - this.animationFrame ) / 5 * this._scene.moveInfo.moveVector.y\n\t\t};\n        this._ctx.fillStyle = '#FFD400';\n        this._ctx.beginPath();\n        this._ctx.arc(\n            player.x * this._tileSize + this._tileSize / 2,\n            player.y * this._tileSize + this._tileSize / 2,\n            this._tileSize / 2, 0, 2 * Math.PI\n        );\n        this._ctx.fill();\n    }\n\n    _drawExit() {\n        const exit = this._scene.exit;\n        this._ctx.fillStyle = '#D90368';\n        this._ctx.fillRect( exit.x * this._tileSize, exit.y * this._tileSize, this._tileSize, this._tileSize );\n    }\n}\n\n","\nimport { Emitter } from './emitter';\nimport { Rectangle, Position, RectangleBlockJson, CustomBlockJson, Block, Level, MoveInfo } from './common';\nimport { RectangleBlock } from './rectangleblock';\nimport { CustomBlock } from './customblock';\n\nexport class Scene {\n    public levelChangeEmitter: Emitter<void>;\n    public blocks!: Block[];\n    public board!: Rectangle;\n    public exit!: Position;\n\tpublic playerPosition!: Position;\n\tpublic moveInfo: MoveInfo = {\n\t\tmoveVector: {\n\t\t\tx: 0, y: 0,\n\t\t}\n\t};\n\n    constructor() {\n        this.levelChangeEmitter = new Emitter();\n    }\n\n    setLevelData( level: Level ) {\n        level = JSON.parse( JSON.stringify( level ) );\n\n        this.blocks = this._createBlocksFromJson( level.blocks );\n        this.board = level.board;\n        this.exit = level.exit;\n        this.playerPosition = level.playerPosition;\n    }\n\n    _createBlocksFromJson( jsonBlocks: ( RectangleBlockJson | CustomBlockJson )[] ) {\n        return jsonBlocks.map( jsonBlock => {\n            if ( jsonBlock.type == 'rectangle' ) {\n                return new RectangleBlock( jsonBlock.position, jsonBlock.width, jsonBlock.height );\n            }\n            if ( jsonBlock.type == 'custom' ) {\n                return new CustomBlock( jsonBlock.points );\n            }\n\n            throw new Error();\n        } );\n    }\n\n    isExitAt( position: Position ) {\n        return position.x == this.exit.x && position.y == this.exit.y;\n    }\n\n    isEmptyAt( position: Position ) {\n        for ( const block of this.blocks ) {\n            for ( const partialPosition of block.partialPositions ) {\n                if ( position.x == partialPosition.x && position.y == partialPosition.y ) {\n                    return false;\n                }\n            }\n        }\n\n        return true;\n    }\n\n    canBlockBeMoved( block: Block, moveVector: Position ) {\n        let canBlockBeMoved = true;\n        const previousBlocks = this.blocks.slice();\n        this.blocks = this.blocks.filter( blockInArr => block !== blockInArr );\n\n        for ( const partialPosition of block.partialPositions ) {\n            const newPosition = {\n                x: partialPosition.x + moveVector.x,\n                y: partialPosition.y + moveVector.y\n            };\n\n            if ( !this.isPositionOnBoard( newPosition ) ) {\n                canBlockBeMoved = false;\n            }\n\n            if ( !this.isEmptyAt( newPosition ) ) {\n                canBlockBeMoved = false;\n\t\t\t}\n\t\t\t\n\t\t\tif ( this.isExitAt( newPosition ) ) {\n\t\t\t\tcanBlockBeMoved = false;\n\t\t\t}\n        }\n        this.blocks = previousBlocks;\n        return canBlockBeMoved;\n    }\n\n    findBlock( position: Position ) {\n        for ( const block of this.blocks ) {\n            for ( const partialPosition of block.partialPositions ) {\n                if ( position.x == partialPosition.x && position.y == partialPosition.y ) {\n                    return block;\n                }\n            }\n        }\n    }\n\n    isPositionOnBoard( position: Position ) {\n        return (\n            position.x < this.board.width &&\n\t\t\tposition.y < this.board.height &&\n\t\t\tposition.x >= 0 &&\n\t\t\tposition.y >= 0\n        );\n    }\n\n    movePlayer( moveVector: Position ) {\n        const newPosition = {\n            x: this.playerPosition.x + moveVector.x,\n            y: this.playerPosition.y + moveVector.y\n\t\t};\n\t\t\n\t\tthis.moveInfo = {\n\t\t\tmoveVector: {\n\t\t\t\tx: 0,\n\t\t\t\ty: 0,\n\t\t\t}\n\t\t}\n\n        if ( !this.isPositionOnBoard( newPosition ) ) {\n            return;\n        }\n\n\n\n        if ( this.isExitAt( newPosition ) ) {\n            this.playerPosition = newPosition;\n\t\t\tthis.levelChangeEmitter.emit();\n\t\t\tthis.moveInfo.moveVector = moveVector;\n\n            return;\n        }\n\n        if ( this.isEmptyAt( newPosition ) ) {\n\t\t\tthis.playerPosition = newPosition;\n\t\t\tthis.moveInfo.moveVector = moveVector;\n        } else {\n            const block = this.findBlock( newPosition )!;\n\n            if ( this.canBlockBeMoved( block, moveVector ) ) {\n\t\t\t\tthis.moveInfo.block = block;\n\t\t\t\tthis.playerPosition = newPosition;\n\t\t\t\tthis.moveInfo.moveVector = moveVector;\n                block.move( moveVector );\n            }\n        }\n    }\n}\n\n"],"sourceRoot":""}